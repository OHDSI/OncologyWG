<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Oncology Model</title>

<script src="site_libs/header-attrs-2.25/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />
<link rel='shortcut icon' type='image/x-icon' href='favicon.ico' />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><div><img src="images/ohdsi16x16.png"></img> OHDSI Oncology WG </div></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
     Home
  </a>
</li>
<li>
  <a href="background.html">
    <span class="fa fa-circle-info"></span>
     
     Background
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-people-group"></span>
     
       Development Effort
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="development.html">
        <span class="fa fa-map"></span>
         
         Development Overview
      </a>
    </li>
    <li>
      <a href="progressMap.html">
        <span class="fa fa-list-check"></span>
         
         Progress Map
      </a>
    </li>
    <li>
      <a href="githubProject.html">
        <span class="fa fa-github"></span>
         
         Github Project Orientation
      </a>
    </li>
    <li>
      <a href="gettingInvolved.html">
        <span class="fa fa-user-plus"></span>
         
           Getting Involved
      </a>
    </li>
  </ul>
</li>
<li>
  <a href="conventions.html">
    <span class="fa fa-gavel"></span>
     
     Conventions
  </a>
</li>
<li>
  <a href="model.html">
    <span class="fa fa-sitemap"></span>
     
     Model
  </a>
</li>
<li>
  <a href="tooling.html">
    <span class="fa fa-wrench"></span>
     
     Tools
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/OHDSI/OncologyWG">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore"><img src="images/ohdsi40x40.png"></img>Oncology
Model</h1>

</div>


<p><br></p>
<blockquote>
<p><svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:orange;overflow:visible;position:relative;"><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/></svg>
Under Construction</p>
</blockquote>
<div id="representation" class="section level2">
<h2><strong>Representation</strong></h2>
<p><br></p>
<div id="diagnosis" class="section level3">
<h3>Diagnosis</h3>
<p>The <strong>Cancer Diagnostic Model in the OMOP vocabulary</strong>
is comprised of: * <strong>Cancer diagnosis</strong>: a condition that
is a combination of histology (morphology) and topography (anatomic
site). * <strong>Diagnostic schema</strong>: a group of cancer diagnoses
with similar diagnostic features. * <strong>Diagnostic
modifiers</strong>: a set of diagnostic features that define a group of
cancer diagnoses. These include stage, grade, laterality, genomic
biomarkers, and other attributes.</p>
<p><img
src="https://user-images.githubusercontent.com/57408355/76053847-9c1c5380-5f3c-11ea-8ac2-4efbcc4ee66e.png" /></p>
<hr />
<div id="cancer-diagnosis" class="section level4">
<h4>Cancer Diagnosis</h4>
<ul>
<li><strong>Cancer diagnosis</strong> is stored in the
CONDITION_OCCURRENCE table.</li>
<li><strong>Diagnostic modifiers</strong> are stored in the MEASUREMENT
table. They are explicitly linked to the cancer diagnosis record in
CONDITION_OCCURRENCE via the columns MEASUREMENT.modifier_of_event_id
and MEASUREMENT.modifier_of_field_concept_id:
MEASUREMENT.modifier_of_event_id contains value of the respective
condition_occurrence_id. MEASUREMENT.modifier_of_field_concept_id
contains the concept for the condition_occurrence_id field
(1147127).</li>
</ul>
<p><img
src="https://user-images.githubusercontent.com/57408355/76053733-2912dd00-5f3c-11ea-9ae5-0e3d95aef79d.png" /></p>
<p><img
src="https://user-images.githubusercontent.com/57408355/76053666-f8cb3e80-5f3b-11ea-895a-f4375686b43f.png" /></p>
<hr />
</div>
</div>
<div id="treatments" class="section level3">
<h3>Treatments</h3>
<p>The <strong>Cancer Treatment Model in the OMOP vocabulary</strong> is
comprised of: * <strong>Cancer treatments</strong>: a higher-level
procedure or regimen concept that raises above the transactional and
observational details of treatment planning, treatment delivery, and
treatment billing. Cancer treatment concepts attempt to capture the
overall modality of a therapeutic or diagnostic intervention.<br />
* <strong>Treatment modifiers</strong>: a set of features that refine
the description of a cancer treatment. These include: ‘Number of
Fractions’, ‘Radiation Primary Treatment Volume’, ‘Total Dose’ and other
attributes of a radiation therapy treatment; ‘Lymph nodes examined’,
‘Surgical Margins’ and other attributes of a surgery.</p>
<hr />
<div id="cancer-treatment" class="section level4">
<h4>Cancer Treatment</h4>
<ul>
<li><strong>Cancer treatment</strong> is stored in the
PROCEDURE_OCCURRENCE and EPISODE table.</li>
<li><strong>Treatment modifiers</strong> are stored in the MEASUREMENT
table. They are explicitly linked to the cancer treatment record in
PROCEDURE_OCCURRENCE via the columns MEASUREMENT.modifier_of_event_id
and MEASUREMENT.modifier_of_field_concept_id:
MEASUREMENT.modifier_of_event_id contains value of the respective
procedure_occurrence_id. MEASUREMENT.modifier_of_field_concept_id
contains the concept for the procedure_occurrence_id field
(1147084).</li>
</ul>
<hr />
</div>
</div>
<div id="episodes" class="section level3">
<h3>Episodes</h3>
<p>Clinically and analytically relevant representation of cancer
diagnoses, treatments, and outcomes requires data abstraction. Examples
include ‘Disease First Occurrence’, ‘Disease Recurrence’, ‘Disease
Remission’, ‘Disease Progression’, ‘Treatment Regimen’, and ‘Treatment
Cycle’.</p>
<p><img
src="https://user-images.githubusercontent.com/57408355/76054020-354b6a00-5f3d-11ea-8107-ec3ce45370f0.png" /></p>
<ul>
<li><strong>Disease and treatment episodes</strong> are represented in
the EPISODE table. <a
href="https://github.com/OHDSI/OncologyWG/wiki/Episode">See the
definition of the EPISODE table here.</a></li>
<li>Standard Episode Concepts are categorized by concept class: ( UNDER
REVIEW:)</li>
</ul>
<p>-TODO-</p>
<ul>
<li>The EPISODE.episode_object_id column refers to a concept identifier
in the Standardized Vocabularies describing the disease, treatment, or
other abstraction that the episode describes. Episode entries from the
‘Disease Episode’ concept class should have an episode_object_concept_id
that comes from the Condition domain. Episode entries from the
‘Treatment Episode’ concept class should have an
episode_object_concept_id that comes from the ‘Procedure’ or ‘Regimen’
domain.</li>
<li>The relationship between a disease episode and treatment episodes
can be represented by the self-referencing foreign key column
EPISODE.episode_parent_id. This allows for the attribution of cancer
treatment to a cancer diagnosis to help support the use case of
calculating time from diagnosis to treatment.</li>
<li>The relationship between a ‘Disease First Occurrence’ disease
episode and a subsequent ‘Disease Progression’ episode can be
represented by the self-referencing foreign key column
EPISODE.episode_parent_id. This enables support for the use case of
calculating interval time to progression.</li>
<li>A treatment EPISODE can be delivered at regular intervals, cycles or
fractions. The parent-child relationship between a treatment episode and
its constituent treatment cycles can be represented by the
self-referencing foreign key column EPISODE.episode_parent_id.</li>
</ul>
<p><img
src="https://user-images.githubusercontent.com/57408355/76054102-82c7d700-5f3d-11ea-988b-82fec7919989.png" /></p>
<ul>
<li><p><strong>Episode modifiers</strong> Episode modifiers are very
similar to condition and procedure modifiers. For example, a ‘Disease
First Occurrence’ of ‘Carcinoma of breast’ can have stage, grade, and
other attributes of the ‘Carcinoma of breast’. A ‘Treatment Regimen’ of
‘External beam, NOS’ can have ‘Number of Fractions’, ‘Radiation Primary
Treatment Volume’, ‘Total Dose’ and other attributes of ‘External beam,
NOS’.</p></li>
<li><p><strong>Connection between episodes and lower-level
events</strong> (e.g. conditions, procedures, drugs) are represented in
the linking EPISODE_EVENT table. In this table: event_id contains value
of the respective lower level event (e.g. condition_occurrence_id) and
;episode_event_field_concept_id field contains concept for the
corresponding field (e.g. concept ID 1147127 for
‘condition_occurrence_id field’).</p></li>
</ul>
<p><img
src="https://user-images.githubusercontent.com/57408355/76054164-c0c4fb00-5f3d-11ea-9a36-b873ed92cb94.png" /></p>
<ul>
<li><strong>Episode population</strong> may be accomplished by multiple
strategies:
<ul>
<li><strong>Directly from Tumor Registries</strong>: ETL Disease
Episodes, Disease Episode Modifiers, Treatment Episodes and Treatment
Episode Modifiers directly from tumor registry data. Tumor registries
natively capture many of the abstractions and detailed modifiers that
the Oncology CDM Extension strives to instantiate. A standard ETL has
been written capable of ETLing NAACCR-formated tumor registry data.<a
href="https://github.com/OHDSI/OncologyWG/wiki/Oncology-CDM-Extension-Installation/">See
the documentation of the NAACCR ETL here</a></li>
<li><strong>Directly from non-registry sources</strong>: ETL Disease
Episodes, Disease Episode Modifiers, Treatment Episodes and Treatment
Episode Modifiers directly from EHR systems, ancillary clinical systems,
Oncology Analytic Platforms and custom clinical data repositories. Some
Oncology EMRs (Elekta MOSAIQ, Flatiron OncoEMR), the Oncology modules of
standard EMRs (EPIC Beacon), ancillary clinical system (Pathology LIMS
capturing CAP Cancer checklists via mTuitive CAP eFRM/xPert for
Pathology), Oncology Analytic platforms ((Flatiron OncoAnalytics, COTA,
TEMPUS) and custom clinical data repositories natively capture and/or
curate the abstractions and detailed modifiers that the Oncology CDM
Extension strives to instantiate.</li>
<li><strong>Indirectly via Algorithmic Derivation on top of the OMOP
CDM:</strong> Run algorithms on top of the OMOP standardized clinical
data tables. For example, machine learning, rules-based compendium-aided
temporal logic, and natural language processing. ETL Disease Episodes,
Disease Episode Modifiers, Treatment Episodes and Treatment Episode
Modifiers from the outputs of the algorithms.</li>
</ul></li>
</ul>
</div>
</div>
<div id="schema" class="section level2">
<h2><strong>Schema</strong></h2>
<div id="measurement" class="section level3">
<h3>MEASUREMENT</h3>
<p>The Oncology CDM Extension adds two new fields (modifier_of_event_id
and modifier_of_field_concept_id) to enable the MEASUREMENT table to
represent modifiers.</p>
<table>
<colgroup>
<col width="33%" />
<col width="8%" />
<col width="12%" />
<col width="46%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Field</th>
<th align="left">Required</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">measurement_id</td>
<td align="left">Yes</td>
<td align="left">integer</td>
<td align="left">A unique identifier for each Measurement.</td>
</tr>
<tr class="even">
<td align="left">person_id</td>
<td align="left">Yes</td>
<td align="left">integer</td>
<td align="left">A foreign key identifier to the Person about whom the
measurement was recorded. The demographic details of that Person are
stored in the PERSON table.</td>
</tr>
<tr class="odd">
<td align="left">measurement_concept_id</td>
<td align="left">Yes</td>
<td align="left">integer</td>
<td align="left">A foreign key to the standard measurement concept
identifier in the Standardized Vocabularies. These belong to the
‘Measurement’ domain, but could overlap with the ‘Observation’ domain
(see #3 below).</td>
</tr>
<tr class="even">
<td align="left">measurement_date</td>
<td align="left">No</td>
<td align="left">date</td>
<td align="left">The date of the Measurement.</td>
</tr>
<tr class="odd">
<td align="left">measurement_datetime</td>
<td align="left">Yes</td>
<td align="left">datetime</td>
<td align="left">The date and time of the Measurement. Some database
systems don’t have a datatype of time. To accommodate all temporal
analyses, datatype datetime can be used (combining measurement_date and
measurement_time <a
href="http://forums.ohdsi.org/t/date-time-and-datetime-problem-and-the-world-of-hours-and-1day/314">forum
discussion</a>)</td>
</tr>
<tr class="even">
<td align="left">measurement_time</td>
<td align="left">No</td>
<td align="left">varchar(10)</td>
<td align="left">The time of the Measurement. This is present for
backwards compatibility and will be deprecated in an upcoming
version</td>
</tr>
<tr class="odd">
<td align="left">measurement_type_concept_id</td>
<td align="left">Yes</td>
<td align="left">integer</td>
<td align="left">A foreign key to the predefined Concept in the
Standardized Vocabularies reflecting the provenance from where the
Measurement record was recorded. These belong to the ‘Meas Type’
vocabulary</td>
</tr>
<tr class="even">
<td align="left">operator_concept_id</td>
<td align="left">No</td>
<td align="left">integer</td>
<td align="left">A foreign key identifier to the predefined Concept in
the Standardized Vocabularies reflecting the mathematical operator that
is applied to the value_as_number. Operators are &lt;, &lt;=, =, &gt;=,
&gt; and these concepts belong to the ‘Meas Value Operator’ domain.</td>
</tr>
<tr class="odd">
<td align="left">value_as_number</td>
<td align="left">No</td>
<td align="left">float</td>
<td align="left">A Measurement result where the result is expressed as a
numeric value.</td>
</tr>
<tr class="even">
<td align="left">value_as_concept_id</td>
<td align="left">No</td>
<td align="left">integer</td>
<td align="left">A foreign key to a Measurement result represented as a
Concept from the Standardized Vocabularies (e.g., positive/negative,
present/absent, low/high, etc.). These belong to the ‘Meas Value’
domain</td>
</tr>
<tr class="odd">
<td align="left">unit_concept_id</td>
<td align="left">No</td>
<td align="left">integer</td>
<td align="left">A foreign key to a Standard Concept ID of Measurement
Units in the Standardized Vocabularies that belong to the ‘Unit’
domain.</td>
</tr>
<tr class="even">
<td align="left">range_low</td>
<td align="left">No</td>
<td align="left">float</td>
<td align="left">The lower limit of the normal range of the Measurement
result. The lower range is assumed to be of the same unit of measure as
the Measurement value.</td>
</tr>
<tr class="odd">
<td align="left">range_high</td>
<td align="left">No</td>
<td align="left">float</td>
<td align="left">The upper limit of the normal range of the Measurement.
The upper range is assumed to be of the same unit of measure as the
Measurement value.</td>
</tr>
<tr class="even">
<td align="left">provider_id</td>
<td align="left">No</td>
<td align="left">integer</td>
<td align="left">A foreign key to the provider in the PROVIDER table who
was responsible for initiating or obtaining the measurement.</td>
</tr>
<tr class="odd">
<td align="left">visit_occurrence_id</td>
<td align="left">No</td>
<td align="left">integer</td>
<td align="left">A foreign key to the Visit in the VISIT_OCCURRENCE
table during which the Measurement was recorded.</td>
</tr>
<tr class="even">
<td align="left">visit_detail_id</td>
<td align="left">No</td>
<td align="left">integer</td>
<td align="left">A foreign key to the Visit Detail in the VISIT_DETAIL
table during which the Measurement was recorded.</td>
</tr>
<tr class="odd">
<td align="left">measurement_source_value</td>
<td align="left">No</td>
<td align="left">varchar(50)</td>
<td align="left">The Measurement name as it appears in the source data.
This code is mapped to a Standard Concept in the Standardized
Vocabularies and the original code is stored here for reference.</td>
</tr>
<tr class="even">
<td align="left">measurement_source_concept_id</td>
<td align="left">Yes</td>
<td align="left">integer</td>
<td align="left">A foreign key to a Concept in the Standard Vocabularies
that refers to the code used in the source.</td>
</tr>
<tr class="odd">
<td align="left">unit_source_value</td>
<td align="left">No</td>
<td align="left">varchar(50)</td>
<td align="left">The source code for the unit as it appears in the
source data. This code is mapped to a standard unit concept in the
Standardized Vocabularies and the original code is stored here for
reference.</td>
</tr>
<tr class="even">
<td align="left">value_source_value</td>
<td align="left">No</td>
<td align="left">varchar(50)</td>
<td align="left">The source value associated with the content of the
value_as_number or value_as_concept_id as stored in the source
data.</td>
</tr>
<tr class="odd">
<td align="left"><strong>modifier_of_event_id</strong></td>
<td align="left"><strong>No</strong></td>
<td align="left"><strong>bigint</strong></td>
<td align="left"><strong>A foreign key identifier to the event
(e.g. condition, procedure, episode) record for which the modifier is
recorded.</strong></td>
</tr>
<tr class="even">
<td align="left"><strong>modifier_of_field_concept_id</strong></td>
<td align="left"><strong>No</strong></td>
<td align="left"><strong>integer</strong></td>
<td align="left"><strong>The concept representing the table field
concept that contains the value of the event id for which the modifier
is recorded (e.g. CONDITION_OCCURRENCE.condition_occurre
nce_id).</strong></td>
</tr>
</tbody>
</table>
<p><br></p>
</div>
<div id="episode" class="section level3">
<h3>EPISODE</h3>
<p>The EPISODE table aggregates lower-level clinical events
(VISIT_OCCURRENCE, DRUG_EXPOSURE, PROCEDURE_OCCURRENCE, DEVICE_EXPOSURE)
into a higher-level abstraction representing clinically and analytically
relevant disease phases/outcomes and treatments. The <a
href="https://github.com/OHDSI/OncologyWG/wiki/EPISODE_EVENT">EPISODE_EVENT</a>
table connects qualifying clinical events (VISIT_OCCURRENCE,
DRUG_EXPOSURE, PROCEDURE_OCCURRENCE, DEVICE_EXPOSURE) to the appropriate
EPISODE entry.</p>
<table>
<colgroup>
<col width="23%" />
<col width="33%" />
<col width="16%" />
<col width="26%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Field Name</th>
<th align="left">Required</th>
<th align="left">Datatype</th>
<th align="left">Field Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">episode_id</td>
<td align="left">Yes</td>
<td align="left">bigint</td>
<td align="left">A unique identifier for each Episode event.</td>
</tr>
<tr class="even">
<td align="left">person_id</td>
<td align="left">Yes</td>
<td align="left">bigint</td>
<td align="left">A foreign key identifier to the Person who is
experiencing the episode. The demographic details of that Person are
stored in the PERSON table.</td>
</tr>
<tr class="odd">
<td align="left">episode_concept_id</td>
<td align="left">Yes</td>
<td align="left">integer</td>
<td align="left">A foreign key that refers to a Standard Concept
identifier in the Standardized Vocabularies belonging to the ‘Episode’
domain.</td>
</tr>
<tr class="even">
<td align="left">episode_start_datetime</td>
<td align="left">Yes</td>
<td align="left">datetime</td>
<td align="left">The date and time when the Episode begins.</td>
</tr>
<tr class="odd">
<td align="left">episode_end_datetime</td>
<td align="left">No</td>
<td align="left">datetime</td>
<td align="left">The date when the instance of the Episode is considered
to have ended.</td>
</tr>
<tr class="even">
<td align="left">episode_parent_id</td>
<td align="left">No</td>
<td align="left">bigint</td>
<td align="left">A foreign key that refers to a parent Episode entry
representing an entire episode if the episode spans multiple
cycles.</td>
</tr>
<tr class="odd">
<td align="left">episode_number</td>
<td align="left">No</td>
<td align="left">integer</td>
<td align="left">An ordinal count for an Episode that spans multiple
times.</td>
</tr>
<tr class="even">
<td align="left">episode_object_concept_id</td>
<td align="left">Yes</td>
<td align="left">integer</td>
<td align="left">A foreign key that refers to a concept identifier in
the Standardized Vocabularies describing the disease, treatment, or
other abstraction that the episode describes. Episode entries from the
‘Disease Episode’ concept class should have an episode_object_concept_id
that comes from the Condition domain. Episode entries from the
‘Treatment Episode’ concept class should have an
episode_object_concept_id that comes from the ‘Procedure’ or ‘Regimen’
domain.</td>
</tr>
<tr class="odd">
<td align="left">episode_type_concept_id</td>
<td align="left">Yes</td>
<td align="left">integer</td>
<td align="left">A foreign key to the predefined Concept identifier in
the Standardized Vocabularies reflecting the source data from which the
Episode was recorded, the level of standardization, and the type of
occurrence. These belong to the ‘Episode Type’ vocabulary.</td>
</tr>
<tr class="even">
<td align="left">episode_source_value</td>
<td align="left">No</td>
<td align="left">varchar(50)</td>
<td align="left">The source code for the Episdoe as it appears in the
source data. This code is mapped to a Standard Condition Concept in the
Standardized Vocabularies and the original code is stored here for
reference.</td>
</tr>
</tbody>
</table>
</div>
<div id="episode_event" class="section level3">
<h3>EPISODE_EVENT</h3>
<p>The EPISODE_EVENT table connects qualifying clinical events
(VISIT_OCCURRENCE, DRUG_EXPOSURE, PROCEDURE_OCCURRENCE, DEVICE_EXPOSURE)
to the appropriate EPISODE entry. The EPISODE_EVENT table supports the
linkage of an EPISODE abstraction to the low-level clinical events that
implement the EPISODE abstraction.</p>
<table>
<colgroup>
<col width="25%" />
<col width="11%" />
<col width="17%" />
<col width="46%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Field</th>
<th align="left">Required</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">episode_id</td>
<td align="left">Yes</td>
<td align="left">bigint</td>
<td align="left">A foreign key identifier to the Episode that the
Episode Event belongs to.</td>
</tr>
<tr class="even">
<td align="left">event_id</td>
<td align="left">Yes</td>
<td align="left">bigint</td>
<td align="left">A foreign key identifier to the underlying event
(condition, procedure, measurement, etc.) record in a respective table
for which an episode is recorded.</td>
</tr>
<tr class="odd">
<td align="left">episode_event_field_concept_id</td>
<td align="left">Yes</td>
<td align="left">int</td>
<td align="left">A foreign key identifier to the standardized concept
corresponding to the table primary key column
(condition_occurrence.condition_occurrence_id,
procedure_occurrence.procedure_occurrence_id, measurment.measurment_id
etc.) where the underlying event is stored.</td>
</tr>
</tbody>
</table>
</div>
<div id="concept_numeric" class="section level3">
<h3>CONCEPT_NUMERIC</h3>
<p><strong>CONCEPT_NUMERIC</strong> is an extension of the OMOP CDM and
vocabulary that supports formal representation of concepts containing
numeric values or ranges. This proposal has not yet been ratified by a
larger CDM Workgroup. However, it plays a critical role in supporting
ETL from tumor registries.</p>
<p><strong>Background</strong> * NAACCR vocabulary includes concepts
representing numeric values or numeric ranges. Often, these concepts
also contain measurement units. For example, “Described as less than 1
centimeter (cm)”. In OMOP CDM, these concepts are normally used in
Measurement and Observation tables to store value_as_concept_id.
Analysis of these data is currently possible only if the user knows
exactly which concepts are used to represent range or value, including
their respective units. It is not possible to perform analysis on
numeric values of these data, nor is it possible to differentiate
numeric values by units. For example, it is not impossible to find
tumors which size is less than 2 cm by issuing the following simple
query:</p>
<pre class="sql"><code>    SELECT * 
    FROM measurement
    WHERE measurement_concept_id = 4139794  -- Tumor size
    AND ( (value_as_number &lt;= 2 and unit_concept_id = 8582) -- Centimeter
    OR (value_as_number &lt;= 20 and unit_concept_id = 8588)) --Millimeter
    AND COALESCE(operator_concept_id, 4171754) = 4171754 -- Less than or equal</code></pre>
<p>One has to know exactly the concepts that cover this range.</p>
<div id="proposal-1" class="section level4">
<h4>Proposal 1</h4>
<p><strong>Add a new table, CONCEPT_NUMERIC</strong></p>
<p>In this table, numeric values, units and math operators indicating
range limits (less than) corresponding to “numeric” concepts will be
stored.</p>
<table>
<colgroup>
<col width="23%" />
<col width="33%" />
<col width="16%" />
<col width="26%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Field</th>
<th align="left">Required</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">concept_id</td>
<td align="left">Yes</td>
<td align="left">integer</td>
<td align="left">A foreign key that refers to a respective concept in
the Standardized Vocabularies.</td>
</tr>
<tr class="even">
<td align="left">value_as_number</td>
<td align="left">Yes</td>
<td align="left">float</td>
<td align="left">A value of the concept expressed as a numeric
value.</td>
</tr>
<tr class="odd">
<td align="left">unit_concept_id</td>
<td align="left">No</td>
<td align="left">integer</td>
<td align="left">A foreign key to a Standard Concept ID of the concept
units in the Standardized Vocabularies that belong to the ‘Unit’
domain.</td>
</tr>
<tr class="even">
<td align="left">operator_concept_id</td>
<td align="left">yes</td>
<td align="left">float</td>
<td align="left">A foreign key identifier to the predefined Concept in
the Standardized Vocabularies reflecting the mathematical operator that
is applied to the value_as_number. Operators are &lt;, &lt;=, =, &gt;=,
&gt; and these concepts belong to the ‘Meas Value Operator’ domain.</td>
</tr>
</tbody>
</table>
</div>
<div id="proposal-2." class="section level4">
<h4>Proposal 2.</h4>
<p>Conventions for representing “numeric” concepts in
<strong>CONCEPT_NUMERIC</strong></p>
<p>Numeric ranges that have lower and upper limits will be represented
by two records in this table. Numeric ranges containing only lower or
upper limit will be represented by one record.</p>
<p>Below are examples of representing the following “numeric” concepts
in CONCEPT_NUMERIC:</p>
<table>
<colgroup>
<col width="11%" />
<col width="18%" />
<col width="13%" />
<col width="12%" />
<col width="18%" />
<col width="13%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">concept_id</th>
<th align="left">concept_name</th>
<th align="left">domain_id</th>
<th align="left">vocabulary_id</th>
<th align="left">concept_class_id</th>
<th align="left">standard_concept</th>
<th align="left">concept_code</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">45883535</td>
<td align="left">Mild</td>
<td align="left">Meas Value</td>
<td align="left">LOINC</td>
<td align="left">Answer</td>
<td align="left">S</td>
<td align="left">LA6752-5</td>
</tr>
<tr class="even">
<td align="left">35920053</td>
<td align="left">Described as “less than 1 centimeter (cm)”</td>
<td align="left">Meas Value</td>
<td align="left">NAACCR</td>
<td align="left">Cancer Identification</td>
<td align="left">S</td>
<td align="left"><a href="mailto:melanoma_skin@2800"
class="email">melanoma_skin@2800</a><span
class="citation">@991</span></td>
</tr>
<tr class="odd">
<td align="left">35919956</td>
<td align="left">Described as “less than 2 cm,” or “greater than 1 cm,”
or “between 1 cm and 2 cm”</td>
<td align="left">Meas Value</td>
<td align="left">NAACCR</td>
<td align="left">Cancer Identification</td>
<td align="left">S</td>
<td align="left"><a href="mailto:melanoma_mouth_other@2800"
class="email">melanoma_mouth_other@2800</a><span
class="citation">@992</span></td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>CONCEPT_NUMERIC</strong></p>
<table>
<colgroup>
<col width="16%" />
<col width="23%" />
<col width="19%" />
<col width="17%" />
<col width="23%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">concept_id</th>
<th align="left">value_as_number</th>
<th align="left">unit_concept_id</th>
<th align="left">operator_concept_id</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">45883535</td>
<td align="left">1</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">1 is numeric value of ‘Mild’</td>
</tr>
<tr class="even">
<td align="left">35920053</td>
<td align="left">1</td>
<td align="left">8582</td>
<td align="left">4171756</td>
<td align="left">‘Less than 1 cm’</td>
</tr>
<tr class="odd">
<td align="left">35919956</td>
<td align="left">1</td>
<td align="left">8582</td>
<td align="left">4171755</td>
<td align="left">Lower limit of ‘between 1 cm and 2 cm’</td>
</tr>
<tr class="even">
<td align="left">35919956</td>
<td align="left">2</td>
<td align="left">8582</td>
<td align="left">4171754</td>
<td align="left">Upper limit of ‘between 1 cm and 2 cm’</td>
</tr>
</tbody>
</table>
</div>
<div id="proposal-3." class="section level4">
<h4>Proposal 3.</h4>
<p>Population of Measurement and Observation tables with the data
represented by “numeric” concepts</p>
<p>When data are represented by “numeric” concepts, we recommend
populating value_as_number, unit_id and operator_id (if available) along
with value_as_concept_id. These additional values can be easily
extracted from Concept_Numeric for the respective concept. Below is an
example of Measurement record representing ‘Mild’ (45883535) ‘Pain
intensity rating scale’ (4137083):</p>
<table>
<colgroup>
<col width="21%" />
<col width="30%" />
<col width="25%" />
<col width="23%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">measurement_id</th>
<th align="left">measurement_concept_id</th>
<th align="left">value_as_concept_id</th>
<th align="left">value_as_number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1111111</td>
<td align="left">4137083</td>
<td align="left">45883535</td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<p>In case, when a numeric concept represents a range with both lower
and upper limits (e.g. ‘between 1 and 2 cm’), we recommend creating two
records representing respectively lower and upper limit of the range.
Values for value_as_number, unit_id and operator_id will be extracted
from Concept_Numeric. Below is an example of Measurement record
representing ‘Tumor size’ (4139794) ‘Described as “less than 2 cm,” or
“greater than 1 cm,” or “between 1 cm and 2 cm”’ (35919956):</p>
<table>
<colgroup>
<col width="13%" />
<col width="20%" />
<col width="16%" />
<col width="15%" />
<col width="13%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">measurement_id</th>
<th align="left">measurement_concept_id</th>
<th align="left">value_as_concept_id</th>
<th align="left">value_as_number</th>
<th align="left">unit_concept_id</th>
<th align="left">operator_concept_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2222222</td>
<td align="left">4139794</td>
<td align="left">35919956</td>
<td align="left">1</td>
<td align="left">8582</td>
<td align="left">4171755</td>
</tr>
<tr class="even">
<td align="left">3333333</td>
<td align="left">4139794</td>
<td align="left">35919956</td>
<td align="left">2</td>
<td align="left">8582</td>
<td align="left">4171754</td>
</tr>
</tbody>
</table>
<p>This representation was also suggested in this Forum post: <a
href="https://forums.ohdsi.org/t/how-to-implement-a-lab-test-range-result-in-measurement-table/5221"
class="uri">https://forums.ohdsi.org/t/how-to-implement-a-lab-test-range-result-in-measurement-table/5221</a></p>
</div>
<div id="proposal-4." class="section level4">
<h4>Proposal 4.</h4>
<p>Queries to analyze data represented by “numeric” concepts When data
represented by “numeric” concepts is stored in the Measurement table as
described in the previous section, queries based on numeric values
become possible against this data.</p>
<p>For example:</p>
<pre><code>SELECT * 
FROM measurement
WHERE measurement_concept_id = 4139794  -- Tumor size
AND ( (value_as_number &lt;= 2 and unit_concept_id = 8582) -- Centimeter
OR (value_as_number &lt;= 20 and unit_concept_id = 8588)) --Millimeter
AND COALESCE(operator_concept_id, 4171754) = 4171754 -- Less than or equal</code></pre>
<p>This query will identify records containing either regular numeric
values (e.g. value_as_number = 0.5) or “numeric” concepts.</p>
<p><br></p>
</div>
</div>
</div>
<div id="vocabularies" class="section level2">
<h2><strong>Vocabularies</strong></h2>
<ul>
<li>Cancer Modifier (OMOP)</li>
<li>ICD-0</li>
<li>NAACCR</li>
<li>HemOnc</li>
<li>CAP</li>
<li>Genomic Vocabulary (OMOP)</li>
<li>Nebraska Lexicon</li>
</ul>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
